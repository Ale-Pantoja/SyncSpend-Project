import{c as a}from"./notificiation.BI0G4Md-.js";import{k as n,B as l}from"./index.BXL97NTB.js";import{a as c}from"./accounts.module.CLXOAEk-.js";import{a as p}from"./index.CViUNx8d.js";const i=`${l}/api/transactions`;let d=[];const e=p(d),u=async o=>{try{const r=await n.post(i,{json:o,credentials:"include"}).json();e.set([...e.get(),r]),await c.getAccount(),a({title:"Nueva transaccion agregada",description:`${r.description}`,type:"success"})}catch(r){console.log(r);const t=await r.response.json();a({title:"Ups! Hubo un error",description:t.error,type:"error"})}},y=async o=>{const r=`${i}/${o}`;try{const t=await n.delete(r,{credentials:"include"}).json();e.set(e.get().filter(s=>s.id!==t.id)),await c.getAccount(),a({title:"Transaccion eliminada",description:`${t.name}`,type:"success"})}catch(t){console.log(t);const s=await t.response.json();a({title:"Ups! Hubo un error",description:s.error,type:"error"})}},g=async o=>{const r=`${i}/${o.id}`;try{const t=await n.put(r,{json:o,credentials:"include"}).json();e.set(e.get().map(s=>s.id===t.id?t:s)),a({title:"transaccion actualizada",description:`${t.description}`,type:"success"}),await c.getAccount()}catch(t){console.log(t);const s=await t.response.json();a({title:"Ups! Hubo un error",description:s.error,type:"error"})}},m=async()=>{try{const o=await n.get(`${l}/api/transactions`,{credentials:"include"}).json();e.set(o)}catch(o){(o.response.status===401||o.response.status===403)&&location.replace("/login"),console.log(o)}},A={addTransaction:u,removeTransaction:y,updateTransaction:g,getTransaction:m};export{e as a,A as t};
