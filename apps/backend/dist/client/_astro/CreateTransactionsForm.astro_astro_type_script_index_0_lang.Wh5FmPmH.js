import{t as S}from"./transactions.module.uFFnM2s4.js";import{b,a as E}from"./accounts.module.CLXOAEk-.js";import"./notificiation.BI0G4Md-.js";import"./index.BXL97NTB.js";import"./index.CViUNx8d.js";const c=document.querySelector("#description-input"),r=document.querySelector("#date-input"),l=document.querySelector("#type-select"),i=document.querySelector("#amount-input"),a=document.querySelector("#account-select"),f=document.querySelector("#main-transaction-form"),y=document.querySelector("#main-transaction-form-btn"),T=/^(?=.*[a-zA-Z0-9])[a-zA-Z0-9\s]+$/;let d=!1,u=!1,m=!1,p=!1,v=!1;const o=(e,t)=>{const n=document.querySelector("#description-error"),L=e.nextElementSibling;e.value===""&&e.tagName!=="SELECT"?(e.classList.remove("input-invalid","input-valid"),n?.classList.add("hidden"),L.innerHTML=""):t?(e.classList.add("input-valid"),e.classList.remove("input-invalid"),n?.classList.add("hidden"),L.innerHTML='<span class="iconify" data-icon="mdi:check-circle" style="color: green;"></span>'):(e.classList.add("input-invalid"),e.classList.remove("input-valid"),n?.classList.remove("hidden"),L.innerHTML='<span class="iconify" data-icon="mdi:close-circle" style="color: red;"></span>')},s=()=>{d&&u&&m&&p&&v?y.disabled=!1:y.disabled=!0};b.subscribe(e=>{a.innerHTML='<option value="" disabled selected>Selecciona una cuenta</option>';for(const t of e){const n=document.createElement("option");n.value=Number(t.id),n.textContent=`${t.name} ${t.currency}`,a.appendChild(n)}});c.addEventListener("input",()=>{d=T.test(c.value),o(c,d),s()});r.addEventListener("input",()=>{u=r.value!=="",o(r,u),s()});l.addEventListener("change",()=>{m=l.value!=="",o(l,m),s()});i.addEventListener("input",()=>{p=!isNaN(i.value)&&Number(i.value)>=0,o(i,p),s()});a.addEventListener("change",()=>{v=a.value!=="",o(a,v),s()});f.addEventListener("submit",async e=>{if(e.preventDefault(),!d||!u||!m||!p||!v)return;const t={description:c.value,date:new Date(r.value).toISOString(),type:l.value,amount:Number(i.value),accountId:Number(a.value)};console.log(t),await S.addTransaction(t),f.reset(),createTransactionModal.classList.add("hidden")});(async()=>await E.getAccount())();
