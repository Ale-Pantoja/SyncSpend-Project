import{b,a as r}from"./accounts.module.CD9CCYs4.js";import"./notificiation.BI0G4Md-.js";import"./index.BXL97NTB.js";import"./index.CViUNx8d.js";const u=document.querySelector("#account-list"),h=document.getElementById("archived-list"),g=document.querySelector("#account-item-template"),f=document.getElementById("totalVES"),w=document.getElementById("totalUSD"),E=document.getElementById("show-archived-btn"),L=document.getElementById("close-modal-btn"),v=document.getElementById("archived-modal"),m=e=>{const i=g.content.cloneNode(!0).querySelector("li");if(i){i.id=e.id,i.classList.add("generated-account-item");const c=i.querySelectorAll("input");c[0].value=e.name,c[1].value=e.currency,c[2].value=e.balance;const n=i.querySelector(".flex.gap-2.items-center");if(n){n.querySelectorAll("button:not(.edit-btn)").forEach(o=>o.remove());const s=document.createElement("button");s.classList.add("w-8","h-8","flex","justify-center","items-center","text-gray-600","hover:text-teal-600"),e.is_active?(s.classList.add("archive-btn"),s.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="24" height="24" viewBox="0 0 24 24">
          <rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect>
          <path d="M16 3h-8a2 2 0 0 0-2 2v2h12V5a2 2 0 0 0-2-2z"></path>
        </svg>`):(s.classList.add("unarchive-btn"),s.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="24" height="24" viewBox="0 0 24 24">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
          <polyline points="17 8 12 3 7 8"></polyline>
          <line x1="12" y1="3" x2="12" y2="15"></line>
        </svg>`),n.appendChild(s)}}return i},p=e=>{const a=e.filter(t=>t.is_active),i=e.filter(t=>!t.is_active);u.querySelectorAll(".generated-account-item").forEach(t=>t.remove()),h.innerHTML="";let c=0,n=0;a.forEach(t=>{u.prepend(m(t)),t.currency==="VES"?c+=Number(t.balance):t.currency==="USD"&&(n+=Number(t.balance))}),i.forEach(t=>{h.appendChild(m(t))}),f.textContent=c,w.textContent=n};b.subscribe(p);document.addEventListener("click",async e=>{const a=e.target.closest(".archive-btn"),i=e.target.closest(".unarchive-btn"),c=e.target.closest(".edit-btn"),n=e.target.closest("li");if(!n)return;const t=Number(n.id);if(a)await r.updateAccount({id:t,is_active:!1});else if(i)await r.updateAccount({id:t,is_active:!0});else if(c){const s=n.dataset.status,o=n.children[0].children[0],l=n.children[0].children[1],d=n.children[0].children[2];if(s==="inputs-deshabilitados")o.removeAttribute("readonly"),l.removeAttribute("readonly"),d.removeAttribute("readonly"),n.dataset.status="inputs-habilitados",c.children[0].classList.add("hidden"),c.children[1].classList.remove("hidden");else if(s==="inputs-habilitados"){o.setAttribute("readonly",!0),l.setAttribute("readonly",!0),d.setAttribute("readonly",!0),n.dataset.status="inputs-deshabilitados",c.children[0].classList.remove("hidden"),c.children[1].classList.add("hidden");const y={id:t,name:o.value,currency:l.value,balance:Number(d.value)};await r.updateAccount(y)}}});E.addEventListener("click",()=>{v.classList.remove("hidden")});L.addEventListener("click",()=>{v.classList.add("hidden")});r.getAccount().then(e=>{p(e)});
