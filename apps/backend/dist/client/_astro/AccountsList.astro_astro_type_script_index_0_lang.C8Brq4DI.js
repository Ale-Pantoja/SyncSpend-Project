import{b,a as r}from"./accounts.module.BC2N5coI.js";import"./notificiation.BI0G4Md-.js";import"./endpoints.QH1VciTq.js";import"./index.B9b1t7QR.js";import"./index.CViUNx8d.js";const u=document.querySelector("#account-list"),h=document.getElementById("archived-list"),g=document.querySelector("#account-item-template"),f=document.getElementById("totalVES"),w=document.getElementById("totalUSD"),E=document.getElementById("show-archived-btn"),L=document.getElementById("close-modal-btn"),v=document.getElementById("archived-modal"),m=e=>{const c=g.content.cloneNode(!0).querySelector("li");if(c){c.id=e.id,c.classList.add("generated-account-item");const i=c.querySelectorAll("input");i[0].value=e.name,i[1].value=e.currency,i[2].value=e.balance;const n=c.querySelector(".flex.gap-2.items-center");if(n){n.querySelectorAll("button:not(.edit-btn)").forEach(s=>s.remove());const o=document.createElement("button");o.classList.add("w-8","h-8","flex","justify-center","items-center","text-gray-600","hover:text-teal-600"),e.is_active?(o.classList.add("archive-btn"),o.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="24" height="24" viewBox="0 0 24 24">
          <rect x="2" y="7" width="20" height="14" rx="2" ry="2"></rect>
          <path d="M16 3h-8a2 2 0 0 0-2 2v2h12V5a2 2 0 0 0-2-2z"></path>
        </svg>`):(o.classList.add("unarchive-btn"),o.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" width="24" height="24" viewBox="0 0 24 24">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
          <polyline points="17 8 12 3 7 8"></polyline>
          <line x1="12" y1="3" x2="12" y2="15"></line>
        </svg>`),n.appendChild(o)}}return c},p=e=>{const a=e.filter(t=>t.is_active),c=e.filter(t=>!t.is_active);u.querySelectorAll(".generated-account-item").forEach(t=>t.remove()),h.innerHTML="";let i=0,n=0;a.forEach(t=>{u.prepend(m(t)),t.currency==="VES"?i+=Number(t.balance):t.currency==="USD"&&(n+=Number(t.balance))}),c.forEach(t=>{h.appendChild(m(t))}),f.textContent=i,w.textContent=n};b.subscribe(p);document.addEventListener("click",async e=>{const a=e.target.closest(".archive-btn"),c=e.target.closest(".unarchive-btn"),i=e.target.closest(".edit-btn"),n=e.target.closest("li");if(!n)return;const t=Number(n.id);if(a)await r.updateAccount({id:t,is_active:!1});else if(c)await r.updateAccount({id:t,is_active:!0});else if(i){const o=n.dataset.status,s=n.children[0].children[0],l=n.children[0].children[1],d=n.children[0].children[2];if(o==="inputs-deshabilitados")s.removeAttribute("readonly"),l.removeAttribute("readonly"),d.removeAttribute("readonly"),n.dataset.status="inputs-habilitados",i.children[0].classList.add("hidden"),i.children[1].classList.remove("hidden");else if(o==="inputs-habilitados"){s.setAttribute("readonly",!0),l.setAttribute("readonly",!0),d.setAttribute("readonly",!0),n.dataset.status="inputs-deshabilitados",i.children[0].classList.remove("hidden"),i.children[1].classList.add("hidden");const y={id:t,name:s.value,currency:l.value,balance:Number(d.value)};await r.updateAccount(y)}}});E.addEventListener("click",()=>{v.classList.remove("hidden")});L.addEventListener("click",()=>{v.classList.add("hidden")});r.getAccount().then(e=>{p(e)});
