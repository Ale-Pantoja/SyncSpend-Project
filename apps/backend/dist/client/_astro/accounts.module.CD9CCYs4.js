import{c as n}from"./notificiation.BI0G4Md-.js";import{k as c,B as l}from"./index.BXL97NTB.js";import{a as u}from"./index.CViUNx8d.js";const i=`${l}/api/accounts`;let d=[];const o=u(d),p=async e=>{try{const r=await c.post(i,{json:e,credentials:"include"}).json();o.set(o.get().concat(r)),n({title:"Cuenta creada!",type:"success"})}catch(r){console.log(r);const t=await r.response.json();n({title:"Ups! Hubo un error",description:t.error,type:"error"})}},y=async e=>{const r=`${i}/${e}`;try{const t=await c.delete(r,{credentials:"include"}).json();o.set(o.get().filter(s=>s.id!==t.id)),n({title:"Cuenta eliminada",description:`${t.name}`,type:"success"})}catch(t){console.log(t);const s=await t.response.json();n({title:"Ups! Hubo un error",description:s.error,type:"error"})}},m=async e=>{const r=`${i}/${e.id}`,t={};e.name!==void 0&&(t.name=e.name),e.balance!==void 0&&(t.balance=e.balance),e.is_active!==void 0&&(t.is_active=e.is_active);try{const s=await c.put(r,{json:t,credentials:"include"}).json();o.set(o.get().map(a=>a.id===s.id?s:a)),n({title:"Cuenta actualizada",description:"",type:"success"})}catch(s){console.log(s);const a=await s.response.json();n({title:"Ups! Hubo un error",description:a.error,type:"error"})}},f=async()=>{try{const e=await c.get(`${l}/api/accounts`,{credentials:"include"}).json();o.set(e)}catch(e){(e.response?.status===401||e.response?.status===403)&&location.replace("/login"),console.log(e)}},w={addAccount:p,removeAccount:y,updateAccount:m,getAccount:f};export{w as a,o as b};
