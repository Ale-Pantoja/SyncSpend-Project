import{k as f,B as b}from"./index.BXL97NTB.js";import{c as m}from"./notificiation.BI0G4Md-.js";const v=document.querySelector("#signup-form"),i=document.querySelector("#email"),n=document.querySelector("#nombre"),o=document.querySelector("#password"),r=document.querySelector("#verify-password"),V=document.querySelector("#submit-button"),y=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/,g=/^[A-Za-z0-9\s.,!?/-]{0,255}$/,h=/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{6,}$/,s={isEmailValid:!1,isNameValid:!1,isPasswordValid:!1,doPasswordsMatch:!1};function t(e,a){a?(e.classList.remove("border-red-500","dark:border-red-500"),e.classList.add("border-green-500","dark:border-green-500")):(e.classList.remove("border-green-500","dark:border-green-500"),e.classList.add("border-red-500","dark:border-red-500")),e.value===""&&e.classList.remove("border-red-500","dark:border-red-500","border-green-500","dark:border-green-500")}function c(){const{isEmailValid:e,isNameValid:a,isPasswordValid:l,doPasswordsMatch:u}=s;V.disabled=!e||!a||!l||!u}i.addEventListener("input",()=>{const e=y.test(i.value);s.isEmailValid=e,t(i,e),c()});n.addEventListener("input",()=>{const e=g.test(n.value);s.isNameValid=e,t(n,e),c()});o.addEventListener("input",()=>{const e=h.test(o.value);s.isPasswordValid=e,t(o,e);const a=o.value===r.value&&r.value.length>0;s.doPasswordsMatch=a,t(r,a),c()});r.addEventListener("input",()=>{const e=o.value===r.value&&r.value.length>0;s.doPasswordsMatch=e,t(r,e),c()});v.addEventListener("submit",async e=>{e.preventDefault();const{isEmailValid:a,isNameValid:l,isPasswordValid:u,doPasswordsMatch:p}=s;if(!(!a||!l||!u||!p))try{await f.post(`${b}/api/users`,{json:{email:i.value,name:n.value,password:o.value}});for(const d in s)s[d]=!1;v.reset(),[i,n,o,r].forEach(d=>{t(d)}),c(),m({title:"Usuario creado!",description:"Se ha enviado un correo de verificacion a su bandeja de correo",type:"success"})}catch(d){const w=await d?.response?.json();m({title:"Ups! Hubo un error",description:w?.error??"Sin mensaje",type:"error"})}});
