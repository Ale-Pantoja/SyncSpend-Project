import{c as a}from"./notificiation.BI0G4Md-.js";import{k as n,B as l}from"./index.BXL97NTB.js";import{a as c}from"./accounts.module.CD9CCYs4.js";import{a as p}from"./index.CViUNx8d.js";const i=`${l}/api/transactions`;let d=[];const r=p(d),u=async o=>{try{const s=await n.post(i,{json:o,credentials:"include"}).json();r.set([...r.get(),s]),await c.getAccount(),a({title:"Nueva transaccion agregada",description:`${s.description}`,type:"success"})}catch(s){console.log(s);const t=await s.response.json();a({title:"Ups! Hubo un error",description:t.error,type:"error"})}},g=async o=>{const s=`${i}/${o}`;try{const t=await n.delete(s,{credentials:"include"}).json();r.set(r.get().filter(e=>e.id!==t.id)),await c.getAccount(),a({title:"Transaccion eliminada",description:`${t.name}`,type:"success"})}catch(t){console.log(t);const e=await t.response.json();a({title:"Ups! Hubo un error",description:e.error,type:"error"})}},y=async o=>{const s=`${i}/${o.id}`;try{const t=await n.put(s,{json:o,credentials:"include"}).json();r.set(r.get().map(e=>e.id===t.id?t:e)),a({title:"transaccion actualizada",description:`${t.description}`,type:"success"}),await c.getAccount()}catch(t){console.log(t);const e=await t.response.json();a({title:"Ups! Hubo un error",description:e.error,type:"error"})}},m=async()=>{try{const o=await n.get(`${l}/api/transactions`,{credentials:"include"}).json();console.log("gygyggy",o),r.set(o)}catch(o){(o.response?.status===401||o.response?.status===403)&&location.replace("/login"),console.log(o)}},A={addTransaction:u,removeTransaction:g,updateTransaction:y,getTransaction:m};export{r as a,A as t};
